name: J4 Download Translations Crowdin Action
# Controls when the action will run. 
on:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  CROWDIN_PERSONAL_TOKEN: ${{ secrets.CROWDIN_PERSONAL_TOKEN }}

# A workflow run is made up of one or more jobs that can run sequentially or in parallel  
jobs:
  synchronize-with-crowdin:
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - name: Checkout
      uses: actions/checkout@v2
    
    # Runs the Crowdin action command - https://github.com/crowdin/github-action
    - name: Crowdin Download Afrikaans
      uses: crowdin/github-action@1.3.0
      with:
        # Option to specify a path to the configuration file, without / at the beginning
        config: 'Configurations/Crowdin-J4-All.yml'
        # Upload sources to Crowdin
        upload_sources: false
        # Make pull request of Crowdin translations
        download_translations: true
        # Download specific language
        download_language: af
        # Only download translated strings
        skip_untranslated_strings: true
        # Include approved translations only in exported files. 
        # If not combined with --skip-untranslated-strings option, strings without approval are fulfilled with the source language'
        export_only_approved: true

    - name: Crowdin Download Albanian
      uses: crowdin/github-action@1.3.0
      with:
        config: 'Configurations/Crowdin-J4-All.yml'
        upload_sources: false
        download_translations: true
        download_language: sq
        skip_untranslated_strings: true
        export_only_approved: true
